# Product Context

## なぜこのプロジェクトが存在するのか

### ユースケース
1. **日常会話の記録**: 家族との会話、子供の成長記録
2. **ビジネス会議**: 商談、ミーティング、インタビュー
3. **学習・研究**: 講義、セミナー、研究ディスカッション

### 解決する問題
- **時間の節約**: 手動文字起こし不要（1時間の音声 → 自動処理5分）
- **記憶の補完**: 「あの話題いつだっけ?」を即座に検索
- **コンテキスト保持**: 誰が・何を・いつ話したかの完全な記録

## どのように動作するか

### ユーザー体験フロー
1. **ファイルアップロード**: Google DriveまたはiCloud Driveに音声ファイルをアップロード
2. **自動検知**: システムが新規ファイルを検知（Webhook/ファイル監視）
3. **文字起こし**: Whisper APIで音声→テキスト変換
4. **カレンダー統合**: Google Calendarから会議情報を取得
5. **参加者抽出**: カレンダーから参加者を抽出・DB化
6. **話者推論**: 参加者情報を元に「誰が話したか」を推論
7. **Vector DB登録**: 文字起こし内容をベクトル化して検索可能に
8. **ファイル整理**: AIが内容から適切なファイル名を生成

### 主要機能

#### 1. 自動文字起こし (Phase 0)
- Whisper APIによる高精度文字起こし
- 25MB超過ファイルの自動分割処理
- 構造化JSON出力（セグメント単位）

#### 2. 参加者DB管理 (Phase 11-3 Steps 3-4)
- カレンダーから参加者抽出（LLM使用）
- 参加者情報のDB永続化（SQLite）
- 過去の会議履歴の検索

#### 3. 話者推論 (Phase 11-3 Step 7)
- カレンダー参加者情報を活用
- エンティティ情報との統合
- 高精度な話者特定

#### 4. Vector DB検索 (Phase 11-4, 11-5)
- セマンティック検索（自然言語クエリ）
- 類似会話の発見
- RAG（Retrieval-Augmented Generation）

#### 5. ファイル管理 (Phase 10)
- AI生成ファイル名（内容ベース）
- 重複ファイル検知・削除
- 処理済みレジストリ管理

## ユーザーができること

### 現在実装済み
- [x] Google Drive/iCloud Driveに音声ファイルをアップロード → 自動文字起こし
- [x] カレンダー情報と連携した参加者抽出
- [x] 話者推論による「誰が話したか」の特定
- [x] Vector DBへの自動登録（enhanced JSON生成後）
- [x] 重複ファイルの自動検知

### 今後実装予定
- [ ] Vector DB検索UI（Phase 11-5）
- [ ] 「○○について話した会議はいつ?」のような自然言語検索
- [ ] RAG統合による文脈理解型要約
- [ ] モバイルアプリからのアクセス

## UI/UX要件

### 現状
- **CLI**: コマンドライン実行
- **ログ出力**: リアルタイム進捗表示
- **Google Docs**: モバイル表示用（オプション）

### 理想
- Web UI: ファイルアップロード、検索、結果表示
- モバイルアプリ: スマホから直接録音 → 文字起こし
- ダッシュボード: 処理状況、DB統計の可視化

## 品質基準

### パフォーマンス
- 文字起こし速度: 1分の音声 → 10秒以内
- 検索速度: 1秒以内に結果表示
- 重複検知: 100%の精度

### 信頼性
- エラーハンドリング: 全てのAPI呼び出しでリトライ機構
- データ永続化: DB・レジストリの確実な保存
- ログ記録: 全処理ステップのトレーサビリティ

### ユーザビリティ
- 設定不要: 初回認証後は完全自動
- エラー通知: 処理失敗時の明確なメッセージ
- 柔軟性: 環境変数で機能ON/OFF可能
